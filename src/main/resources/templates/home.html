<!DOCTYPE html>
<html lang="fr"
      xmlns:th="http://www.thymeleaf.org"> <head>
  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Accueil</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  <link rel="stylesheet" th:href="@{/css/home.css}">
</head>

<body>
<div class="sidebar">

  <div class="logo">
    <img src="img/ChessMate.png" alt="Chessmate">
    <span>Chessmate</span>
  </div>

  <a href="/placement"><i class="fa fa-chess-board"></i> Jouer</a>
  <a href="/puzzle"><i class="fa fa-puzzle-piece"></i> Problèmes</a>
  <a href="#"><i class="fa fa-info-circle"></i> Infos</a>
  <a href="/login"><i class="fa fa-user-friends"></i> Classement</a>
  <a href="#"><i class="fa fa-ellipsis-h"></i> Plus</a>

  <div th:if="${!isLoggedIn}">
    <a href="/register"><button class="green-btn">Créer un compte</button></a>
    <a href="/login"><button class="grey-btn">Se connecter</button></a>
  </div>

  <div th:if="${isLoggedIn}" class="welcome-box">
    <p><strong>Bienvenue</strong> <span th:text="${pseudo}">Pseudo</span></p>
  </div>

</div>
<div class="main-content" style="margin-left: 260px; padding: 20px;">

  <h1>Bienvenue, <span th:text="${pseudo}">Joueur</span> !</h1>

  <div class="news-container" style="margin-bottom: 25px; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
    <h3><i class="fa fa-trophy" style="color: #f39c12;"></i> Tournois en direct</h3>
    <div th:if="${not #lists.isEmpty(tournaments)}">
      <div th:each="t : ${tournaments}" style="padding: 10px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
        <div>
          <strong th:text="${t.fullName}">Nom du tournoi</strong><br>
          <small style="color: #666;">
            Joueurs : <span th:text="${t.nbPlayers}">0</span>
            • Fin dans environ <span th:text="${t.minutes}">0</span> min
          </small>
        </div>
        <a th:href="'https://lichess.org/tournament/' + ${t.id}" target="_blank" class="btn-link" style="color: #2563eb; text-decoration: none; font-size: 0.9em;">Rejoindre →</a>
      </div>
    </div>
    <p th:if="${#lists.isEmpty(tournaments)}" style="color: #999;">Aucun tournoi majeur en cours.</p>
  </div>

  <div class="articles-container" style="padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
    <h3><i class="fa fa-newspaper"></i> Articles & Actualités</h3>

    <div th:each="art : ${articles}" style="margin-bottom: 15px; display: flex; gap: 15px; border-bottom: 1px solid #f0f0f0; padding-bottom: 10px;">

      <img th:if="${art.image}" th:src="${art.image}" style="width: 100px; height: 60px; object-fit: cover; border-radius: 4px; flex-shrink: 0;">

      <div>
        <a th:href="${art.url}" target="_blank" style="text-decoration: none; color: #333; font-weight: bold; font-size: 1.1em;" th:text="${art.title}">Titre</a>

        <p style="font-size: 0.85em; color: #666; margin: 5px 0;" th:text="${art.short}">Résumé...</p>
      </div>
    </div>

    <p th:if="${#lists.isEmpty(articles)}" style="color: #999;">Aucune actualité disponible pour le moment.</p>
  </div>

</div>
</body>
</html>